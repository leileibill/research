* C:\GitHub\research-simulation\Ltspice\FCMC\3level_delay.asc
V2 N006 0 PULSE(0 1 0 1p 1p {1/freq*(1-duty)} {1/freq})
A1 N006 0 0 0 0 0 Ph1 0 BUF
V§Source Vin 0 {Vin}
S11 nc5t sw Ph2b 0 MYSWL
S12 Vin nc5t Ph1b 0 MYSWH
V3 N007 0 PULSE(0 1 {1/freq/2+delay} 1p 1p {1/freq*(1-duty)-delay+delay2} {1/freq})
A3 N007 0 0 0 0 0 Ph2 0 BUF
S5 nc5b sw Ph2 0 MYSWH
S6 0 nc5b Ph1 0 MYSWL
C2 nc5t nc5b {C} Rser={ESR} IC={Vin/2}
L sw N001 10µ Rser=20m ic = {Vin*duty/Rload}
R1 N001 0 {Rload}
C10 N001 0 10µ IC={Vin*duty} Rser=1m
V8 N004 0 PULSE(0 1 {1/freq*(1-duty)+dead+delay} 1p 1p {1/freq*duty-dead*2-delay+delay2} {1/freq})
A8 N004 0 0 0 0 0 Ph1b 0 BUF
V9 N005 0 PULSE(0 1 {1/freq/2+1/freq*(1-duty)+dead} 1p 1p {1/freq*duty-dead*2} {1/freq})
A9 N005 0 0 0 0 0 Ph2b 0 BUF
D1 0 nc5b MyDiode
D2 nc5b sw MyDiode
D7 nc5t Vin MyDiode
D8 sw nc5t MyDiode
R3 N001 sw 10k
.model D D
.lib C:\Program Files (x86)\LTC\LTspiceIV\lib\cmp\standard.dio
.tran 0 {50m + 2/freq} 50m uic
.model MYSWH SW(Ron=12m Roff=1Meg Vt=.5)
.model MYSWL SW(Ron=12m Roff=1Meg Vt=.5)
.model MyDiode D(Ron=2m Roff=1Meg Vfwd=2)
.param delay=3n delay2=2.n
.param freq=120k
.param duty=0.25 Vin= 50 Rload = 100
.param dead=40n
.param C = 2.2u ESR = 5m
.meas TRAN S6max MAX V(sw) - V(nc1b)
.meas TRAN S5max MAX V(nc1b) - V(nc2b)
.meas TRAN S4max MAX V(nc2b) - V(nc3b)
.meas TRAN S3max MAX V(nc3b)-V(nc4b)
.meas TRAN S2max MAX V(nc4b)-V(nc5b)
.meas TRAN S1max MAX V(nc5b)
.meas TRAN Vc5 MAX V(nc5t)-V(nc5b)
.meas TRAN Vc4 MAX V(nc4t)-V(nc4b)
.meas TRAN Vc3 MAX V(nc3t)-V(nc3b)
.meas TRAN Vc2 MAX V(nc2t)-V(nc2b)
.meas TRAN Vc1 MAX V(nc1t)-V(nc1b)
.meas TRAN S6bmax MAX V(nc1t) - V(sw) 
.meas TRAN S5bmax MAX V(nc2t) - V(nc1t) 
.meas TRAN S4bmax MAX V(nc3t) - V(nc2t) 
.meas TRAN S3bmax MAX V(nc4t) - V(nc3t)
.meas TRAN S2bmax MAX V(nc5t) - V(nc4t)
.meas TRAN S1bmax MAX V(Vin) - V(nc5t)
*.step param C list 2.2u 1.1u
*.step param Rload list 10 5
*.step param delay2 list 1.5n 3n
.step param Rload list 50 25 10 5 3 2 1
.backanno
.end
