Version 4
SHEET 1 1904 1716
WIRE -1008 96 -1040 96
WIRE -896 96 -944 96
WIRE -784 96 -800 96
WIRE -672 96 -720 96
WIRE -1040 240 -1040 96
WIRE -1040 240 -1152 240
WIRE -1008 240 -1040 240
WIRE -896 240 -896 96
WIRE -896 240 -928 240
WIRE -864 240 -896 240
WIRE -848 240 -864 240
WIRE -800 240 -800 96
WIRE -800 240 -848 240
WIRE -784 240 -800 240
WIRE -672 240 -672 96
WIRE -672 240 -704 240
WIRE -640 240 -672 240
WIRE -624 240 -640 240
WIRE -272 240 -416 240
WIRE -224 240 -272 240
WIRE -96 240 -224 240
WIRE -640 288 -640 240
WIRE -1152 304 -1152 240
WIRE -864 352 -864 240
WIRE -640 352 -640 288
WIRE -624 352 -640 352
WIRE -416 352 -416 240
WIRE -416 352 -544 352
WIRE -272 368 -272 240
WIRE -96 368 -96 240
WIRE -416 400 -416 352
WIRE -912 432 -960 432
WIRE -784 432 -800 432
WIRE -688 432 -720 432
WIRE -1152 512 -1152 384
WIRE -1024 512 -1024 432
WIRE -1024 512 -1152 512
WIRE -1008 512 -1024 512
WIRE -912 512 -912 432
WIRE -912 512 -928 512
WIRE -864 512 -864 416
WIRE -864 512 -912 512
WIRE -848 512 -864 512
WIRE -800 512 -800 432
WIRE -800 512 -848 512
WIRE -784 512 -800 512
WIRE -704 512 -720 512
WIRE -688 512 -688 432
WIRE -688 512 -704 512
WIRE -640 512 -640 352
WIRE -640 512 -688 512
WIRE -272 512 -272 448
WIRE -224 512 -272 512
WIRE -96 512 -96 432
WIRE -96 512 -224 512
WIRE -1152 544 -1152 512
WIRE -416 544 -416 464
WIRE -224 544 -224 512
WIRE -1040 848 -1040 800
WIRE -816 848 -816 800
WIRE -1040 1136 -1040 1088
WIRE -816 1136 -816 1088
FLAG -1040 1216 0
FLAG -1056 1024 Ph1
FLAG -1152 240 Vin
FLAG -720 288 Ph2b
FLAG -944 288 Ph1b
FLAG -992 288 0
FLAG -768 288 0
FLAG -816 1216 0
FLAG -832 1024 Ph2
FLAG -720 560 Ph2
FLAG -944 560 Ph1
FLAG -992 560 0
FLAG -768 560 0
FLAG -224 544 0
FLAG -1152 544 0
FLAG -1040 928 0
FLAG -1056 736 Ph1b
FLAG -816 928 0
FLAG -832 736 Ph2b
FLAG -848 240 nc3t
FLAG -848 512 nc3b
FLAG -224 240 Vout
FLAG -416 544 0
FLAG -640 288 sw1
SYMBOL voltage -1040 1120 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE(0 1 0 1p 1p {1/freq1*(1-duty)} {1/freq1})
SYMATTR InstName V2
SYMBOL Digital\\buf -1104 1088 R270
SYMATTR InstName A1
SYMBOL voltage -1152 288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Source
SYMATTR Value {Vin}
SYMBOL sw -800 240 R270
SYMATTR InstName S11
SYMATTR Value MYSWH
SYMBOL sw -1024 240 R270
SYMATTR InstName S12
SYMATTR Value MYSWH
SYMBOL voltage -816 1120 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE(0 1 {1/freq1/2+delay} 1p 1p {1/freq1*(1-duty)-delay+delay2} {1/freq1})
SYMATTR InstName V3
SYMBOL Digital\\buf -880 1088 R270
SYMATTR InstName A3
SYMBOL sw -800 512 R270
SYMATTR InstName S5
SYMATTR Value MYSWH
SYMBOL sw -1024 512 R270
SYMATTR InstName S6
SYMATTR Value MYSWH
SYMBOL cap -880 352 R0
SYMATTR InstName C1
SYMATTR Value {C1}
SYMATTR SpiceLine Rser={ESR}
SYMATTR SpiceLine2 IC={Vin/2}
SYMBOL res -288 352 R0
SYMATTR InstName R1
SYMATTR Value {Rload}
SYMBOL cap -112 368 R0
SYMATTR InstName C10
SYMATTR Value {Cout}
SYMATTR SpiceLine IC={Vin/4}
SYMATTR SpiceLine2 Rser={ESR}
SYMBOL voltage -1040 832 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE(0 1 {1/freq1*(1-duty)+dead+delay} 1p 1p {1/freq1*duty-dead*2-delay+delay2} {1/freq1})
SYMATTR InstName V8
SYMBOL Digital\\buf -1104 800 R270
SYMATTR InstName A8
SYMBOL voltage -816 832 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE(0 1 {1/freq1/2+1/freq1*(1-duty)+dead} 1p 1p {1/freq1*duty-dead*2} {1/freq1})
SYMATTR InstName V9
SYMBOL Digital\\buf -880 800 R270
SYMATTR InstName A9
SYMBOL diode -1024 448 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MyDiode
SYMBOL diode -784 448 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value MyDiode
SYMBOL diode -944 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D7
SYMATTR Value MyDiode
SYMBOL diode -720 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value MyDiode
SYMBOL ind -640 368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {L1}
SYMATTR SpiceLine Rser=0.2m Rpar=1k
SYMATTR SpiceLine2 ic = {Vin*duty/Rload}
SYMBOL cap -432 400 R0
SYMATTR InstName C3
SYMATTR Value {Cmid}
SYMATTR SpiceLine IC={Vin/2}
SYMATTR SpiceLine2 Rser={ESR}
TEXT -1256 -160 Left 2 !.tran 0 {1000/freq + 2/freq} {1000/freq} {1/freq/1000} uic
TEXT -632 768 Left 2 !.model MYSWH SW(Ron=3.1m Roff=1Meg Vt=.5)\n.model MYSWL SW(Ron=1.5m Roff=1Meg Vt=.5)
TEXT -632 832 Left 2 !.model MyDiode D(Ron=1m Roff=1Meg Vfwd=1)
TEXT -632 936 Left 2 !.param delay=0n delay2=0n
TEXT -632 968 Left 2 !.param freq=160k freq1={freq}  freq2={freq}
TEXT -632 1128 Left 2 !.param duty=0.5 Vin= 48 Rload = 2
TEXT -632 1032 Left 2 !.param dead=30n
TEXT -632 880 Left 2 !.param C1 = 10u C2 = 20u ESR = 0.4m Cmid = 20u Cout =100u\n.param L1 = 100n L2 = 50n
TEXT -264 -176 Left 2 !.meas TRAN S1max MAX V(sw) - V(nc1b)\n.meas TRAN S2max MAX V(nc1b) - V(nc2b)\n.meas TRAN S3max MAX V(nc2b)
TEXT -264 -312 Left 2 !.meas TRAN Vc2 MAX V(nc2t)-V(nc2b)\n.meas TRAN Vc1 MAX V(nc1t)-V(nc1b)\n.meas TRAN Vc2ave AVG V(nc2t)-V(nc2b)\n.meas TRAN Vc1ave AVG V(nc1t)-V(nc1b)
TEXT -264 -48 Left 2 !.meas TRAN S1bmax MAX V(nc1t) - V(sw) \n.meas TRAN S2bmax MAX V(nc2t) - V(nc1t) \n.meas TRAN S3bmax MAX V(Vin) - V(nc2t)
TEXT -1248 -320 Left 2 !*.step param C list 2.2u 1.1u\n*.step param Rload list 10 5\n*.step param delay list 3n 2n\n*.step param delay2 list 3n 2n\n*.step param Rload list 100 50 25 15 10 5 3 2
TEXT -728 -336 Left 2 !.meas TRAN Iin AVG -I(source)\n.meas TRAN Pin PARAM Vin*Iin\n.meas TRAN Voutave AVG V(Vout)\n.meas TRAN Pout AVG V(Vout)*I(R1)\n.meas TRAN Ploss PARAM Pin-Pout\n.meas TRAN Efficiency PARAM Pout/Pin
